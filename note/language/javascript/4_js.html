<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>第四章：JS Web API | Meiracle</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/assets/me.jpg">
    <script>
  	    var _hmt = _hmt || [];
  	    (function() {
  	      var hm = document.createElement("script");
  	      hm.src = "https://hm.baidu.com/hm.js?301fa1f6c47fde68d9b4bd5a9e660435";
  	      var s = document.getElementsByTagName("script")[0]; 
  	      s.parentNode.insertBefore(hm, s);
  	    })();
  	  </script>
    <meta name="description" content="你能达到什么程度，取决于内心有多渴望">
    <meta name="baidu-site-verification" content="code-usB0NBCiZQ">
    <link rel="preload" href="/assets/css/0.styles.3f6a35ba.css" as="style"><link rel="preload" href="/assets/js/app.748d377e.js" as="script"><link rel="preload" href="/assets/js/3.0c8a96c6.js" as="script"><link rel="preload" href="/assets/js/214.2cffcb08.js" as="script"><link rel="preload" href="/assets/js/5.27126b58.js" as="script"><link rel="preload" href="/assets/js/8.baed6800.js" as="script"><link rel="prefetch" href="/assets/js/10.36be43b0.js"><link rel="prefetch" href="/assets/js/100.0cca1db3.js"><link rel="prefetch" href="/assets/js/101.e942b5d3.js"><link rel="prefetch" href="/assets/js/102.5c1949b7.js"><link rel="prefetch" href="/assets/js/103.f99528ef.js"><link rel="prefetch" href="/assets/js/104.bb460b77.js"><link rel="prefetch" href="/assets/js/105.292a25b5.js"><link rel="prefetch" href="/assets/js/106.baeb8ffb.js"><link rel="prefetch" href="/assets/js/107.365c7e10.js"><link rel="prefetch" href="/assets/js/108.cb76cb35.js"><link rel="prefetch" href="/assets/js/109.d08f3a25.js"><link rel="prefetch" href="/assets/js/11.d71020a0.js"><link rel="prefetch" href="/assets/js/110.6aea9adf.js"><link rel="prefetch" href="/assets/js/111.d8a46ffd.js"><link rel="prefetch" href="/assets/js/112.78a52d32.js"><link rel="prefetch" href="/assets/js/113.1966cb6f.js"><link rel="prefetch" href="/assets/js/114.3e37ac43.js"><link rel="prefetch" href="/assets/js/115.36e7d4e0.js"><link rel="prefetch" href="/assets/js/116.7aff05a8.js"><link rel="prefetch" href="/assets/js/117.e53f4aff.js"><link rel="prefetch" href="/assets/js/118.dc4f1b28.js"><link rel="prefetch" href="/assets/js/119.c6bd4076.js"><link rel="prefetch" href="/assets/js/12.e2a611f2.js"><link rel="prefetch" href="/assets/js/120.6aae2c13.js"><link rel="prefetch" href="/assets/js/121.3660010a.js"><link rel="prefetch" href="/assets/js/122.2a9e07c5.js"><link rel="prefetch" href="/assets/js/123.7fe90664.js"><link rel="prefetch" href="/assets/js/124.1bc30b95.js"><link rel="prefetch" href="/assets/js/125.50b6e281.js"><link rel="prefetch" href="/assets/js/126.4dc106c1.js"><link rel="prefetch" href="/assets/js/127.bb3701b8.js"><link rel="prefetch" href="/assets/js/128.b6c3de17.js"><link rel="prefetch" href="/assets/js/129.513f7e34.js"><link rel="prefetch" href="/assets/js/13.e575677d.js"><link rel="prefetch" href="/assets/js/130.c5b52e5b.js"><link rel="prefetch" href="/assets/js/131.2a2f9290.js"><link rel="prefetch" href="/assets/js/132.a4c366a5.js"><link rel="prefetch" href="/assets/js/133.b407ad41.js"><link rel="prefetch" href="/assets/js/134.72706222.js"><link rel="prefetch" href="/assets/js/135.a73d4573.js"><link rel="prefetch" href="/assets/js/136.13eeab68.js"><link rel="prefetch" href="/assets/js/137.09f2e543.js"><link rel="prefetch" href="/assets/js/138.2a516179.js"><link rel="prefetch" href="/assets/js/139.3f954bc1.js"><link rel="prefetch" href="/assets/js/14.8b127305.js"><link rel="prefetch" href="/assets/js/140.88a60ba8.js"><link rel="prefetch" href="/assets/js/141.7e0b8573.js"><link rel="prefetch" href="/assets/js/142.3cf5b619.js"><link rel="prefetch" href="/assets/js/143.35fd1005.js"><link rel="prefetch" href="/assets/js/144.940a0b5b.js"><link rel="prefetch" href="/assets/js/145.acdca85b.js"><link rel="prefetch" href="/assets/js/146.f5862576.js"><link rel="prefetch" href="/assets/js/147.ba650f6a.js"><link rel="prefetch" href="/assets/js/148.33557b04.js"><link rel="prefetch" href="/assets/js/149.5e6a6b55.js"><link rel="prefetch" href="/assets/js/15.ae68cd1c.js"><link rel="prefetch" href="/assets/js/150.a3ea01c5.js"><link rel="prefetch" href="/assets/js/151.3f59870d.js"><link rel="prefetch" href="/assets/js/152.03dc9aa5.js"><link rel="prefetch" href="/assets/js/153.ffb97cf6.js"><link rel="prefetch" href="/assets/js/154.84fbbf3b.js"><link rel="prefetch" href="/assets/js/155.fff64d3c.js"><link rel="prefetch" href="/assets/js/156.a8ce9dd7.js"><link rel="prefetch" href="/assets/js/157.fc0d6a32.js"><link rel="prefetch" href="/assets/js/158.8455743e.js"><link rel="prefetch" href="/assets/js/159.42d4ca89.js"><link rel="prefetch" href="/assets/js/16.7c403875.js"><link rel="prefetch" href="/assets/js/160.ba8cc643.js"><link rel="prefetch" href="/assets/js/161.db6582e5.js"><link rel="prefetch" href="/assets/js/162.0bceae97.js"><link rel="prefetch" href="/assets/js/163.d8e7b1d6.js"><link rel="prefetch" href="/assets/js/164.80004014.js"><link rel="prefetch" href="/assets/js/165.d7bcbbc9.js"><link rel="prefetch" href="/assets/js/166.3be611a5.js"><link rel="prefetch" href="/assets/js/167.b2776a12.js"><link rel="prefetch" href="/assets/js/168.5ab6acd4.js"><link rel="prefetch" href="/assets/js/169.3732dfbb.js"><link rel="prefetch" href="/assets/js/17.bfdfff0b.js"><link rel="prefetch" href="/assets/js/170.b07e0c12.js"><link rel="prefetch" href="/assets/js/171.34825087.js"><link rel="prefetch" href="/assets/js/172.92f28555.js"><link rel="prefetch" href="/assets/js/173.e6b92fca.js"><link rel="prefetch" href="/assets/js/174.a2a3c9e1.js"><link rel="prefetch" href="/assets/js/175.ff0c5dda.js"><link rel="prefetch" href="/assets/js/176.beeefa99.js"><link rel="prefetch" href="/assets/js/177.373f5333.js"><link rel="prefetch" href="/assets/js/178.63f6bdf0.js"><link rel="prefetch" href="/assets/js/179.051bc664.js"><link rel="prefetch" href="/assets/js/18.f1be74c2.js"><link rel="prefetch" href="/assets/js/180.5d30e8f6.js"><link rel="prefetch" href="/assets/js/181.7bfccb8a.js"><link rel="prefetch" href="/assets/js/182.2af6ae70.js"><link rel="prefetch" href="/assets/js/183.27087e5c.js"><link rel="prefetch" href="/assets/js/184.c74febf0.js"><link rel="prefetch" href="/assets/js/185.8ecf39e9.js"><link rel="prefetch" href="/assets/js/186.fb5ace9e.js"><link rel="prefetch" href="/assets/js/187.825b14b0.js"><link rel="prefetch" href="/assets/js/188.836dc8a4.js"><link rel="prefetch" href="/assets/js/189.fcbf468c.js"><link rel="prefetch" href="/assets/js/19.1498a11e.js"><link rel="prefetch" href="/assets/js/190.1d8b9b85.js"><link rel="prefetch" href="/assets/js/191.29dafa6a.js"><link rel="prefetch" href="/assets/js/192.116faea5.js"><link rel="prefetch" href="/assets/js/193.e29c075c.js"><link rel="prefetch" href="/assets/js/194.7e4ab8b8.js"><link rel="prefetch" href="/assets/js/195.51b5c05d.js"><link rel="prefetch" href="/assets/js/196.3fccfb85.js"><link rel="prefetch" href="/assets/js/197.4752930c.js"><link rel="prefetch" href="/assets/js/198.5a29bfc6.js"><link rel="prefetch" href="/assets/js/199.59aa84ef.js"><link rel="prefetch" href="/assets/js/20.abf8dcc8.js"><link rel="prefetch" href="/assets/js/200.f4a8a7ed.js"><link rel="prefetch" href="/assets/js/201.a536f67b.js"><link rel="prefetch" href="/assets/js/202.4d520d42.js"><link rel="prefetch" href="/assets/js/203.a91a28ea.js"><link rel="prefetch" href="/assets/js/204.39b29850.js"><link rel="prefetch" href="/assets/js/205.480d9158.js"><link rel="prefetch" href="/assets/js/206.ea25f634.js"><link rel="prefetch" href="/assets/js/207.e5c4df4b.js"><link rel="prefetch" href="/assets/js/208.5d2e6b02.js"><link rel="prefetch" href="/assets/js/209.cf0f1f06.js"><link rel="prefetch" href="/assets/js/21.dcbebb85.js"><link rel="prefetch" href="/assets/js/210.fc4bce08.js"><link rel="prefetch" href="/assets/js/211.fbae11f5.js"><link rel="prefetch" href="/assets/js/212.bcfe9831.js"><link rel="prefetch" href="/assets/js/213.80397a2b.js"><link rel="prefetch" href="/assets/js/215.d29ca650.js"><link rel="prefetch" href="/assets/js/216.30f564f5.js"><link rel="prefetch" href="/assets/js/217.4cfbfede.js"><link rel="prefetch" href="/assets/js/218.8609de74.js"><link rel="prefetch" href="/assets/js/219.ea2970cb.js"><link rel="prefetch" href="/assets/js/22.cdd6a3df.js"><link rel="prefetch" href="/assets/js/220.e4a512ea.js"><link rel="prefetch" href="/assets/js/221.70139c01.js"><link rel="prefetch" href="/assets/js/222.3fab222e.js"><link rel="prefetch" href="/assets/js/223.71bf591c.js"><link rel="prefetch" href="/assets/js/224.11c3f7c2.js"><link rel="prefetch" href="/assets/js/225.8a3ab842.js"><link rel="prefetch" href="/assets/js/226.df07d0c8.js"><link rel="prefetch" href="/assets/js/227.a6243227.js"><link rel="prefetch" href="/assets/js/228.b40cf575.js"><link rel="prefetch" href="/assets/js/229.c086f968.js"><link rel="prefetch" href="/assets/js/23.91247a9a.js"><link rel="prefetch" href="/assets/js/230.bf04ca70.js"><link rel="prefetch" href="/assets/js/231.6df4db91.js"><link rel="prefetch" href="/assets/js/232.99b84cdb.js"><link rel="prefetch" href="/assets/js/233.19334596.js"><link rel="prefetch" href="/assets/js/234.04721071.js"><link rel="prefetch" href="/assets/js/235.97ec6678.js"><link rel="prefetch" href="/assets/js/236.d3660a4f.js"><link rel="prefetch" href="/assets/js/237.0a5614e8.js"><link rel="prefetch" href="/assets/js/238.716e3732.js"><link rel="prefetch" href="/assets/js/239.3349e913.js"><link rel="prefetch" href="/assets/js/24.9c0afa17.js"><link rel="prefetch" href="/assets/js/240.f95c8078.js"><link rel="prefetch" href="/assets/js/241.63bb8a79.js"><link rel="prefetch" href="/assets/js/242.553c07b8.js"><link rel="prefetch" href="/assets/js/243.75a6deb0.js"><link rel="prefetch" href="/assets/js/244.33dbd43e.js"><link rel="prefetch" href="/assets/js/245.9fd62d37.js"><link rel="prefetch" href="/assets/js/246.890c63d1.js"><link rel="prefetch" href="/assets/js/247.1e4f0e15.js"><link rel="prefetch" href="/assets/js/248.98a9163c.js"><link rel="prefetch" href="/assets/js/249.89c05f4c.js"><link rel="prefetch" href="/assets/js/25.1cdf64d6.js"><link rel="prefetch" href="/assets/js/250.33272670.js"><link rel="prefetch" href="/assets/js/251.bc1f503e.js"><link rel="prefetch" href="/assets/js/252.c2cf494c.js"><link rel="prefetch" href="/assets/js/253.48b6a391.js"><link rel="prefetch" href="/assets/js/254.f6e5f8f6.js"><link rel="prefetch" href="/assets/js/255.36cdb944.js"><link rel="prefetch" href="/assets/js/256.4fb2cc5e.js"><link rel="prefetch" href="/assets/js/257.995e981d.js"><link rel="prefetch" href="/assets/js/258.b8b40b5f.js"><link rel="prefetch" href="/assets/js/259.c3290740.js"><link rel="prefetch" href="/assets/js/26.5eb7e916.js"><link rel="prefetch" href="/assets/js/260.02838bc4.js"><link rel="prefetch" href="/assets/js/261.5b8ccd91.js"><link rel="prefetch" href="/assets/js/262.28757f54.js"><link rel="prefetch" href="/assets/js/263.c5262163.js"><link rel="prefetch" href="/assets/js/264.4de8fd38.js"><link rel="prefetch" href="/assets/js/265.8c4b549a.js"><link rel="prefetch" href="/assets/js/266.6ea0f3a1.js"><link rel="prefetch" href="/assets/js/267.6fc27848.js"><link rel="prefetch" href="/assets/js/268.fcfd0e3e.js"><link rel="prefetch" href="/assets/js/269.8d8a0e44.js"><link rel="prefetch" href="/assets/js/27.4264eb2f.js"><link rel="prefetch" href="/assets/js/270.934149a6.js"><link rel="prefetch" href="/assets/js/271.040464b4.js"><link rel="prefetch" href="/assets/js/272.75501ba8.js"><link rel="prefetch" href="/assets/js/273.d190005a.js"><link rel="prefetch" href="/assets/js/274.80ebf26b.js"><link rel="prefetch" href="/assets/js/275.a5bcf980.js"><link rel="prefetch" href="/assets/js/276.56699c4b.js"><link rel="prefetch" href="/assets/js/277.015d0582.js"><link rel="prefetch" href="/assets/js/278.201fd9bc.js"><link rel="prefetch" href="/assets/js/279.733f21e1.js"><link rel="prefetch" href="/assets/js/28.21881a61.js"><link rel="prefetch" href="/assets/js/280.920778fc.js"><link rel="prefetch" href="/assets/js/281.39d6502f.js"><link rel="prefetch" href="/assets/js/282.cd459c21.js"><link rel="prefetch" href="/assets/js/283.7ea0dbcb.js"><link rel="prefetch" href="/assets/js/284.664ba521.js"><link rel="prefetch" href="/assets/js/285.91c7ae61.js"><link rel="prefetch" href="/assets/js/286.edb1f30b.js"><link rel="prefetch" href="/assets/js/287.7422b75e.js"><link rel="prefetch" href="/assets/js/288.0b713307.js"><link rel="prefetch" href="/assets/js/289.2cef1e27.js"><link rel="prefetch" href="/assets/js/29.a08c89fd.js"><link rel="prefetch" href="/assets/js/290.09fc1ecd.js"><link rel="prefetch" href="/assets/js/291.4d5b42f3.js"><link rel="prefetch" href="/assets/js/292.dc5f5028.js"><link rel="prefetch" href="/assets/js/293.bebeec2d.js"><link rel="prefetch" href="/assets/js/294.a6d95b36.js"><link rel="prefetch" href="/assets/js/295.e62a5569.js"><link rel="prefetch" href="/assets/js/296.e162f789.js"><link rel="prefetch" href="/assets/js/297.19316aed.js"><link rel="prefetch" href="/assets/js/298.a2509dc4.js"><link rel="prefetch" href="/assets/js/299.26466c8c.js"><link rel="prefetch" href="/assets/js/30.fb8dd5d7.js"><link rel="prefetch" href="/assets/js/300.56e393d5.js"><link rel="prefetch" href="/assets/js/301.4f580512.js"><link rel="prefetch" href="/assets/js/302.c048be82.js"><link rel="prefetch" href="/assets/js/303.3d6a4000.js"><link rel="prefetch" href="/assets/js/304.bb2fd2fd.js"><link rel="prefetch" href="/assets/js/305.c3b16341.js"><link rel="prefetch" href="/assets/js/306.8d482462.js"><link rel="prefetch" href="/assets/js/307.930a9b5f.js"><link rel="prefetch" href="/assets/js/308.60463903.js"><link rel="prefetch" href="/assets/js/309.94c5af3d.js"><link rel="prefetch" href="/assets/js/31.3c9b34be.js"><link rel="prefetch" href="/assets/js/310.3fe97627.js"><link rel="prefetch" href="/assets/js/311.2c566789.js"><link rel="prefetch" href="/assets/js/312.a74cc34f.js"><link rel="prefetch" href="/assets/js/313.f824dc5e.js"><link rel="prefetch" href="/assets/js/314.a27c2f29.js"><link rel="prefetch" href="/assets/js/315.c721f216.js"><link rel="prefetch" href="/assets/js/316.c3d389f5.js"><link rel="prefetch" href="/assets/js/317.04c3e9fc.js"><link rel="prefetch" href="/assets/js/318.37fb3c2e.js"><link rel="prefetch" href="/assets/js/319.36fe9c4a.js"><link rel="prefetch" href="/assets/js/32.5b32f122.js"><link rel="prefetch" href="/assets/js/320.c6522f04.js"><link rel="prefetch" href="/assets/js/321.7175e82b.js"><link rel="prefetch" href="/assets/js/322.95d4462e.js"><link rel="prefetch" href="/assets/js/323.ca771599.js"><link rel="prefetch" href="/assets/js/324.ca09b3f8.js"><link rel="prefetch" href="/assets/js/325.c4fb5cfe.js"><link rel="prefetch" href="/assets/js/326.47cd4150.js"><link rel="prefetch" href="/assets/js/327.678153e5.js"><link rel="prefetch" href="/assets/js/328.18f33129.js"><link rel="prefetch" href="/assets/js/329.02053b3e.js"><link rel="prefetch" href="/assets/js/33.79fc2927.js"><link rel="prefetch" href="/assets/js/330.7c85dbc1.js"><link rel="prefetch" href="/assets/js/331.81124d4f.js"><link rel="prefetch" href="/assets/js/332.f70ff114.js"><link rel="prefetch" href="/assets/js/333.cadd52f3.js"><link rel="prefetch" href="/assets/js/334.7bcc1d9e.js"><link rel="prefetch" href="/assets/js/335.50a3b8f2.js"><link rel="prefetch" href="/assets/js/336.5300eeca.js"><link rel="prefetch" href="/assets/js/337.8adccae9.js"><link rel="prefetch" href="/assets/js/338.c1efca13.js"><link rel="prefetch" href="/assets/js/339.31189486.js"><link rel="prefetch" href="/assets/js/34.ec2bca34.js"><link rel="prefetch" href="/assets/js/340.ebfdf173.js"><link rel="prefetch" href="/assets/js/341.a6f25cc6.js"><link rel="prefetch" href="/assets/js/342.cbbd7653.js"><link rel="prefetch" href="/assets/js/343.4cb80551.js"><link rel="prefetch" href="/assets/js/344.3af7dd57.js"><link rel="prefetch" href="/assets/js/345.dc9a92e4.js"><link rel="prefetch" href="/assets/js/346.496a638e.js"><link rel="prefetch" href="/assets/js/347.3f6b2cad.js"><link rel="prefetch" href="/assets/js/348.2f8a2531.js"><link rel="prefetch" href="/assets/js/349.b91abec8.js"><link rel="prefetch" href="/assets/js/35.c424ce20.js"><link rel="prefetch" href="/assets/js/36.975e02ac.js"><link rel="prefetch" href="/assets/js/37.11f23a85.js"><link rel="prefetch" href="/assets/js/38.c7279cd8.js"><link rel="prefetch" href="/assets/js/39.99544965.js"><link rel="prefetch" href="/assets/js/4.15504c80.js"><link rel="prefetch" href="/assets/js/40.6f75ce88.js"><link rel="prefetch" href="/assets/js/41.a4399901.js"><link rel="prefetch" href="/assets/js/42.493a1406.js"><link rel="prefetch" href="/assets/js/43.107c9e38.js"><link rel="prefetch" href="/assets/js/44.f12fdb22.js"><link rel="prefetch" href="/assets/js/45.da9248c9.js"><link rel="prefetch" href="/assets/js/46.8b3dbb51.js"><link rel="prefetch" href="/assets/js/47.572ab7ab.js"><link rel="prefetch" href="/assets/js/48.42960ddd.js"><link rel="prefetch" href="/assets/js/49.82d60d9a.js"><link rel="prefetch" href="/assets/js/50.58b77bb5.js"><link rel="prefetch" href="/assets/js/51.ae5d21c1.js"><link rel="prefetch" href="/assets/js/52.b718263d.js"><link rel="prefetch" href="/assets/js/53.ae64c52d.js"><link rel="prefetch" href="/assets/js/54.13638784.js"><link rel="prefetch" href="/assets/js/55.e7028657.js"><link rel="prefetch" href="/assets/js/56.04ef4f92.js"><link rel="prefetch" href="/assets/js/57.8e2b1640.js"><link rel="prefetch" href="/assets/js/58.136c7c7d.js"><link rel="prefetch" href="/assets/js/59.fc66d2f3.js"><link rel="prefetch" href="/assets/js/6.f23a1b2e.js"><link rel="prefetch" href="/assets/js/60.c778d761.js"><link rel="prefetch" href="/assets/js/61.d8ff7748.js"><link rel="prefetch" href="/assets/js/62.b9d9ef76.js"><link rel="prefetch" href="/assets/js/63.ce99fd14.js"><link rel="prefetch" href="/assets/js/64.45307033.js"><link rel="prefetch" href="/assets/js/65.1349a66a.js"><link rel="prefetch" href="/assets/js/66.13fb063d.js"><link rel="prefetch" href="/assets/js/67.022b468f.js"><link rel="prefetch" href="/assets/js/68.52eb2688.js"><link rel="prefetch" href="/assets/js/69.acc6dda7.js"><link rel="prefetch" href="/assets/js/7.149bf757.js"><link rel="prefetch" href="/assets/js/70.e53a5af1.js"><link rel="prefetch" href="/assets/js/71.d7542726.js"><link rel="prefetch" href="/assets/js/72.149ac85f.js"><link rel="prefetch" href="/assets/js/73.ddc0cc0e.js"><link rel="prefetch" href="/assets/js/74.59cab670.js"><link rel="prefetch" href="/assets/js/75.74f63cfe.js"><link rel="prefetch" href="/assets/js/76.55d092db.js"><link rel="prefetch" href="/assets/js/77.483506bc.js"><link rel="prefetch" href="/assets/js/78.d8bc039f.js"><link rel="prefetch" href="/assets/js/79.a10b0631.js"><link rel="prefetch" href="/assets/js/80.e6a66fd8.js"><link rel="prefetch" href="/assets/js/81.4216f7c6.js"><link rel="prefetch" href="/assets/js/82.94e4d1bf.js"><link rel="prefetch" href="/assets/js/83.b8d8d1da.js"><link rel="prefetch" href="/assets/js/84.78b27b29.js"><link rel="prefetch" href="/assets/js/85.40c2d768.js"><link rel="prefetch" href="/assets/js/86.8c1670c7.js"><link rel="prefetch" href="/assets/js/87.18d02a67.js"><link rel="prefetch" href="/assets/js/88.cb33ec4d.js"><link rel="prefetch" href="/assets/js/89.7dbcfb4b.js"><link rel="prefetch" href="/assets/js/9.d36a07f3.js"><link rel="prefetch" href="/assets/js/90.dfa86787.js"><link rel="prefetch" href="/assets/js/91.bbcf0c87.js"><link rel="prefetch" href="/assets/js/92.2cc36a89.js"><link rel="prefetch" href="/assets/js/93.a1df9edd.js"><link rel="prefetch" href="/assets/js/94.15739f09.js"><link rel="prefetch" href="/assets/js/95.e658c0fe.js"><link rel="prefetch" href="/assets/js/96.ce9ab34d.js"><link rel="prefetch" href="/assets/js/97.585c950a.js"><link rel="prefetch" href="/assets/js/98.b1163053.js"><link rel="prefetch" href="/assets/js/99.6b2a0c16.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.c300da06.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3f6a35ba.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active home-link"><img src="/assets/me.jpg" alt="Meiracle" class="logo"> <span class="site-name">Meiracle</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          基础
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          Rical
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/call/">
          连环call
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          博客专栏
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-submenu-selected"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          学习笔记
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          常见问答
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <!----></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span></span> <span class="arrow down"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/language/javascript/" aria-current="page" title="写在前面" class="sidebar-link">写在前面</a></li><li><a href="/note/language/javascript/1_js.html" title="第一章：原型和原型链" class="sidebar-link">第一章：原型和原型链</a></li><li><a href="/note/language/javascript/2_js.html" title="第二章：作用域和闭包" class="sidebar-link">第二章：作用域和闭包</a></li><li><a href="/note/language/javascript/3_js.html" title="第三章：同步和异步" class="sidebar-link">第三章：同步和异步</a></li><li><a href="/note/language/javascript/4_js.html" aria-current="page" title="第四章：JS Web API" class="active sidebar-link">第四章：JS Web API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#一-dom-document-object-model" title="一. DOM -&gt; Document Object Model" class="sidebar-link">一. DOM -&gt; Document Object Model</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_1-1-dom的本质" title="1.1 DOM的本质" class="sidebar-link">1.1 DOM的本质</a></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_1-2-dom节点操作" title="1.2 DOM节点操作" class="sidebar-link">1.2 DOM节点操作</a></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_1-3-dom结构操作" title="1.3 DOM结构操作" class="sidebar-link">1.3 DOM结构操作</a></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_1-3-dom性能" title="1.3 DOM性能" class="sidebar-link">1.3 DOM性能</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#二-bom-browser-object-model" title="二. BOM -&gt; Browser Object Model" class="sidebar-link">二. BOM -&gt; Browser Object Model</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_2-1-navigator" title="2.1 navigator" class="sidebar-link">2.1 navigator</a></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_2-2-screen" title="2.2 screen" class="sidebar-link">2.2 screen</a></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_2-3-location" title="2.3 location" class="sidebar-link">2.3 location</a></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_2-4-history" title="2.4 history" class="sidebar-link">2.4 history</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#三-事件" title="三. 事件" class="sidebar-link">三. 事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_3-1-事件绑定" title="3.1 事件绑定" class="sidebar-link">3.1 事件绑定</a></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_3-2-事件冒泡" title="3.2 事件冒泡" class="sidebar-link">3.2 事件冒泡</a></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_3-3-事件代理" title="3.3 事件代理" class="sidebar-link">3.3 事件代理</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#四-ajax" title="四. ajax" class="sidebar-link">四. ajax</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_4-1-xmlhttprequest" title="4.1 XMLHttpRequest" class="sidebar-link">4.1 XMLHttpRequest</a></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_4-2-同源策略" title="4.2 同源策略" class="sidebar-link">4.2 同源策略</a></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_4-3-跨域" title="4.3 跨域" class="sidebar-link">4.3 跨域</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#五-存储" title="五. 存储" class="sidebar-link">五. 存储</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_5-1-cookie" title="5.1 cookie" class="sidebar-link">5.1 cookie</a></li><li class="sidebar-sub-header"><a href="/note/language/javascript/4_js.html#_5-2-html5存储" title="5.2 html5存储" class="sidebar-link">5.2 html5存储</a></li></ul></li></ul></li></ul></section></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h1 id="第四章-js-web-api"><a href="#第四章-js-web-api" class="header-anchor">#</a> 第四章：JS Web API</h1> <h2 id="一-dom-document-object-model"><a href="#一-dom-document-object-model" class="header-anchor">#</a> 一. DOM -&gt; Document Object Model</h2> <h3 id="_1-1-dom的本质"><a href="#_1-1-dom的本质" class="header-anchor">#</a> 1.1 DOM的本质</h3> <ol><li>xml</li></ol> <p><img src="https://s2.ax1x.com/2020/01/27/1uJYyq.md.png" alt="4-1"></p> <ol start="2"><li>html</li></ol> <p><img src="https://s2.ax1x.com/2020/01/27/1uJdTU.md.png" alt="4-2"></p> <p>简单来说，DOM是从HTML语言解析出来的树状结构</p> <p><img src="https://s2.ax1x.com/2020/01/27/1uJ661.md.png" alt="4-3"></p> <h3 id="_1-2-dom节点操作"><a href="#_1-2-dom节点操作" class="header-anchor">#</a> 1.2 DOM节点操作</h3> <h4 id="_1-2-1-获取dom节点"><a href="#_1-2-1-获取dom节点" class="header-anchor">#</a> 1.2.1 获取DOM节点</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> div1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'div1'</span><span class="token punctuation">)</span> <span class="token comment">// 获得元素</span>

<span class="token keyword">const</span> divList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span> <span class="token comment">// 获得集合</span>

<span class="token keyword">const</span> containerList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'.container'</span><span class="token punctuation">)</span> <span class="token comment">// 获得集合</span>

<span class="token keyword">const</span> pList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span> <span class="token comment">// 获得集合</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_1-2-2-dom节点的property"><a href="#_1-2-2-dom节点的property" class="header-anchor">#</a> 1.2.2 DOM节点的property</h4> <ul><li>获取节点js变量的属性，并进行操作</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> pList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> pList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token comment">// 获取样式</span>

p<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'100px'</span> <span class="token comment">// 修改样式</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>className<span class="token punctuation">)</span> <span class="token comment">// 获取 class</span>

p<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'p1'</span> <span class="token comment">// 修改class</span>

<span class="token comment">// 获取nodeName和nodeType</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span> <span class="token comment">// P</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_1-2-3-dom节点的attribute"><a href="#_1-2-3-dom节点的attribute" class="header-anchor">#</a> 1.2.3 DOM节点的attribute</h4> <ul><li>attribute是真正能作用到DOM结构里面去的</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> pList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> pList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

p<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-name'</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-name'</span><span class="token punctuation">,</span><span class="token string">'imooc'</span><span class="token punctuation">)</span>
<span class="token comment">// &lt;p data-name=&quot;imooc&quot; &gt; 一段文字 1&lt;/p&gt;</span>

p<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span><span class="token string">'font-size:30px;'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_1-2-4-总结property和attribute"><a href="#_1-2-4-总结property和attribute" class="header-anchor">#</a> 1.2.4 总结property和attribute</h4> <ul><li>property: 修改对象属性，不会体现到html结构中</li> <li>attribute: 修改HTML属性，会改变HTML结构</li> <li>两者都有可能引起DOM重新渲染</li></ul> <h3 id="_1-3-dom结构操作"><a href="#_1-3-dom结构操作" class="header-anchor">#</a> 1.3 DOM结构操作</h3> <ul><li>获取容器</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> div1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'div1'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> div2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'div2'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_1-3-1-新建节点"><a href="#_1-3-1-新建节点" class="header-anchor">#</a> 1.3.1 新建节点</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> newP <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
newP<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'this is newP'</span>
<span class="token comment">// 插入节点</span>
div1<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>newP<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_1-3-2-移动节点"><a href="#_1-3-2-移动节点" class="header-anchor">#</a> 1.3.2 移动节点</h4> <ul><li>p1是div1中的元素，将他移动到div2</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'p1'</span><span class="token punctuation">)</span>
div2<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_1-3-3-获取父元素"><a href="#_1-3-3-获取父元素" class="header-anchor">#</a> 1.3.3 获取父元素</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>p1<span class="token punctuation">.</span>parentNode <span class="token comment">// div2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_1-3-4-获取子元素"><a href="#_1-3-4-获取子元素" class="header-anchor">#</a> 1.3.4 获取子元素</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> div1ChildNodes <span class="token operator">=</span> div1<span class="token punctuation">.</span>childNodes
<span class="token comment">// 获得的元素除了DOM标签以外，还有text标签。正常的DOM标签的nodeType为1，我们可以由此进行过滤</span>

<span class="token comment">// slice:Returns a section of an array</span>
<span class="token keyword">const</span> div1ChildNodesP <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>div1ChildNodes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>child<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_1-3-5-删除元素"><a href="#_1-3-5-删除元素" class="header-anchor">#</a> 1.3.5 删除元素</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>div1<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>div1ChildNodesP<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//删除第一个p标签</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_1-3-dom性能"><a href="#_1-3-dom性能" class="header-anchor">#</a> 1.3 DOM性能</h3> <ul><li>DOM操作非常“昂贵”，避免频繁的DOM操作</li></ul> <p><strong>优化性能可以采用以下方式</strong></p> <h4 id="_1-3-1-对dom查询做缓存"><a href="#_1-3-1-对dom查询做缓存" class="header-anchor">#</a> 1.3.1 对DOM查询做缓存</h4> <p><strong>举例：</strong></p> <ul><li>不缓存DOM查询结果</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 每次循环，都会计算length，频繁进行DOM操作</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>缓存DOM查询结果</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> pList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> length <span class="token operator">=</span> pList<span class="token punctuation">.</span>length

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 缓存length，只进行一次DOM查询</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_1-3-2-将频繁的操作改为一次性的操作"><a href="#_1-3-2-将频繁的操作改为一次性的操作" class="header-anchor">#</a> 1.3.2 将频繁的操作改为一次性的操作</h4> <ul><li>批量将li插入到id为list的ul中</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> listNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'list'</span><span class="token punctuation">)</span>

<span class="token comment">// 创建一个文档片段，此时还没有插入到DOM树中</span>
<span class="token keyword">const</span> frag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 执行插入 </span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span>
    li<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">list item </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    frag<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 再插入到DOM树中</span>
listNode<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>frag<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="二-bom-browser-object-model"><a href="#二-bom-browser-object-model" class="header-anchor">#</a> 二. BOM -&gt; Browser Object Model</h2> <ul><li>常见API</li></ul> <h3 id="_2-1-navigator"><a href="#_2-1-navigator" class="header-anchor">#</a> 2.1 navigator</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> ua <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent
 <span class="token comment">// 可用该方法查询有对应的浏览器标识，但是目前厂商为了适配更多的浏览器所以给了很多标识导致不能单单靠这一个条件进行判断</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-2-screen"><a href="#_2-2-screen" class="header-anchor">#</a> 2.2 screen</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 屏幕信息</span>
screen<span class="token punctuation">.</span>width
screen<span class="token punctuation">.</span>height
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-3-location"><a href="#_2-3-location" class="header-anchor">#</a> 2.3 location</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 目标URL：https://coding.imooc.com/lesson/115.html?a=100&amp;b=200#mid=30378</span>

<span class="token comment">// 获取当前URl</span>
location<span class="token punctuation">.</span>herf

<span class="token comment">// 获取协议 -&gt; Http: / Https:</span>
location<span class="token punctuation">.</span>protocol

<span class="token comment">// /lesson/115.html</span>
location<span class="token punctuation">.</span>pathname

<span class="token comment">// 查询参数 ?a=100&amp;b=200</span>
location<span class="token punctuation">.</span>search

<span class="token comment">// coding.imooc.com</span>
location<span class="token punctuation">.</span>host

<span class="token comment">// mid=30378</span>
location<span class="token punctuation">.</span>hash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_2-4-history"><a href="#_2-4-history" class="header-anchor">#</a> 2.4 history</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 前进</span>
history<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 后退</span>
history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="三-事件"><a href="#三-事件" class="header-anchor">#</a> 三. 事件</h2> <h3 id="_3-1-事件绑定"><a href="#_3-1-事件绑定" class="header-anchor">#</a> 3.1 事件绑定</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn1'</span><span class="token punctuation">)</span>
btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'clicked'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>**通用的绑定函数： **</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">bindEvent</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> fn<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
    
<span class="token keyword">const</span> btn1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn1'</span><span class="token punctuation">)</span>
<span class="token function">bindEvent</span><span class="token punctuation">(</span>btn1<span class="token punctuation">,</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token comment">// 获取触发的元素</span>
    event<span class="token punctuation">.</span>preventDefault <span class="token comment">// 组织默认行为</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'clicked'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_3-2-事件冒泡"><a href="#_3-2-事件冒泡" class="header-anchor">#</a> 3.2 事件冒泡</h3> <p><strong>比如说我们的DOM结构是这样的:</strong></p> <p><img src="https://s2.ax1x.com/2020/01/29/1MWPDx.png" alt="4-4"></p> <ul><li><p>事件冒泡说的是，如点击div2，div2接收到事件通知，同时会依据DOM树向上传递（冒泡），所以在之后body组件也能得到通知</p></li> <li><p>我们实现一个功能，目的是：点击p1显示激活，点击其他p标签显示取消</p></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'p1'</span><span class="token punctuation">)</span>
<span class="token function">bindEvent</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span><span class="token string">'clicked'</span><span class="token punctuation">,</span><span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 阻止冒泡</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'激活'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span>body
<span class="token function">bindEvent</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> <span class="token string">'clicked'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'取消'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_3-3-事件代理"><a href="#_3-3-事件代理" class="header-anchor">#</a> 3.3 事件代理</h3> <ul><li>所谓事件代理，就是由于可能是瀑布模式，我们很难去确认具体是哪个标签被点击了，所以我们监听这些标签的父标签。
当标签被点击了，事件会冒泡到父标签，这时我们通过一些判断获取到被点击的标签，再做处一些事件</li></ul> <p><strong>比如说我们的DOM结构是这样的:</strong></p> <p><img src="https://s2.ax1x.com/2020/01/29/1MhTvd.png" alt="4-5"></p> <ul><li>我们实现一个功能，目的是：组织默认跳转，显示点击a标签对应的标签名称</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> div1<span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'div1'</span><span class="token punctuation">)</span>

div1<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token parameter">event</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>nodeName <span class="token operator">===</span> <span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>优化：</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">bindEvent</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span>type<span class="token punctuation">,</span>selector<span class="token punctuation">,</span>fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>fn <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        fn <span class="token operator">=</span> selector
        selector <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
    
    elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span><span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target
        
        <span class="token keyword">if</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 代理绑定</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>event<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token comment">// 事件绑定</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>event<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// 普通绑定</span>
<span class="token keyword">const</span> btn1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn1'</span><span class="token punctuation">)</span>
<span class="token comment">// bindEvent(btn1,'click',event =&gt; { // 箭头函数的this是指向上级作用域的，上级作用域是window，所以取不到，改为function可拿到call函数传入的target</span>
<span class="token comment">//     console.log(event.target) // 获取触发的元素</span>
<span class="token comment">//     event.preventDefault // 组织默认行为</span>
<span class="token comment">//     alert(this.innerHTML)</span>
<span class="token comment">// })</span>

<span class="token comment">// 代理绑定</span>
<span class="token function">bindEvent</span><span class="token punctuation">(</span>btn1<span class="token punctuation">,</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h2 id="四-ajax"><a href="#四-ajax" class="header-anchor">#</a> 四. ajax</h2> <h3 id="_4-1-xmlhttprequest"><a href="#_4-1-xmlhttprequest" class="header-anchor">#</a> 4.1 XMLHttpRequest</h3> <h4 id="_4-1-1-手写ajax请求"><a href="#_4-1-1-手写ajax请求" class="header-anchor">#</a> 4.1.1 手写ajax请求</h4> <p><strong>GET请求：</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span><span class="token string">'json地址'</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token comment">// false 表示同步请求</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'其他情况'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>POST请求：</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span><span class="token string">'/login'</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token comment">// true 表示异步请求</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'其他情况'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> postData <span class="token operator">=</span> <span class="token punctuation">{</span>
    userName <span class="token operator">:</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span>
    password <span class="token operator">:</span> <span class="token string">'xxxx'</span>
<span class="token punctuation">}</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>postData<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><img src="https://s2.ax1x.com/2020/01/29/1MoJiV.md.png" alt="4-6"></p> <p><img src="https://s2.ax1x.com/2020/01/29/1MoDd1.md.png" alt="4-7"></p> <h3 id="_4-2-同源策略"><a href="#_4-2-同源策略" class="header-anchor">#</a> 4.2 同源策略</h3> <ul><li><p>ajax请求时，浏览器要求当前网页和server必须同源（安全）</p></li> <li><p>同源：协议、域名和端口，三者必须一致</p></li> <li><p>前端：http://a.com:8080/ ; server: https://b.com/api/xxx -&gt; 协议、域名和端口均不同，属于非同源</p></li> <li><p>加载图片、css和js可无视同源策略</p></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;跨域的图片地址&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>link href<span class="token operator">=</span><span class="token string">&quot;跨域的css地址&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;跨域的js地址&quot;</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>img<span class="token operator">/</span><span class="token operator">&gt;</span> 可用于统计打点，可使用第三方统计服务
<span class="token operator">&lt;</span>link<span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span> 可使用<span class="token constant">CDN</span>，<span class="token constant">CDN</span>一般都是外域
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span> 可实现<span class="token constant">JSONP</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_4-3-跨域"><a href="#_4-3-跨域" class="header-anchor">#</a> 4.3 跨域</h3> <ul><li><p>所有的跨域，都必须经过server端允许和配合</p></li> <li><p>未经server端允许就实现跨域，说明浏览器有漏洞，危险信号</p></li></ul> <h4 id="_4-3-1-jsonp"><a href="#_4-3-1-jsonp" class="header-anchor">#</a> 4.3.1 JSONP</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span> 标签可以跨域
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>服务端可以拼接任意数据返回</p></li> <li><p>所以，只要服务端愿意返回，<code>&lt;script&gt;</code>就可以获得跨域的数据</p></li></ul> <p><strong>举例：</strong> <img src="https://s2.ax1x.com/2020/01/29/1MO7He.md.png" alt="4-8"></p> <p><strong>jQuery实现JSONP</strong></p> <p><img src="https://s2.ax1x.com/2020/01/29/1MOvgP.md.png" alt="4-9"></p> <h4 id="_4-3-2-cors"><a href="#_4-3-2-cors" class="header-anchor">#</a> 4.3.2 CORS</h4> <ul><li>服务器设置 http header</li></ul> <p><img src="https://s2.ax1x.com/2020/01/29/1MX05d.md.png" alt="4-10"></p> <h2 id="五-存储"><a href="#五-存储" class="header-anchor">#</a> 五. 存储</h2> <h3 id="_5-1-cookie"><a href="#_5-1-cookie" class="header-anchor">#</a> 5.1 cookie</h3> <ul><li><p>本身用于浏览器和server通讯</p></li> <li><p>被“借用”到本地存储</p></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">'a=100'</span>
document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">'b=200'</span>

document<span class="token punctuation">.</span>cookie <span class="token comment">// a=100;b=200 (以追加的形式)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><p>储存大小，最大4kb</p></li> <li><p>http请求时需要发送到服务端，增加请求数量</p></li></ul> <h3 id="_5-2-html5存储"><a href="#_5-2-html5存储" class="header-anchor">#</a> 5.2 html5存储</h3> <p>localStorage 和 sessionStorage</p> <ol><li><p>HTML5专门为存储而设计，最大可存5M</p></li> <li><p>API简单易用 setItem getItem</p></li> <li><p>不会随着http请求被发送出去</p></li> <li><p>localStorage数据会永久存储，除非代码或手动删除，一般使用</p></li> <li><p>sessionStorage数据只存在于当前会话，浏览器关闭则清空</p></li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>
localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;100&quot; 强制类型转换为字符串</span>

sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span>
sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;200&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div><div role="separator" class="ant-divider ant-divider-horizontal ant-divider-with-text-center"><span class="ant-divider-inner-text">推广</span></div> <div class="ad ant-card ant-card-bordered ant-card-hoverable"><div class="ant-card-cover"><img alt="example" src="https://img-blog.csdnimg.cn/img_convert/fb2cd43e5774f7cffbd9e30d33fca812.png"></div><div class="ant-card-body"> <p>推荐一个<span class="mark-orange">性能优秀</span>、<span class="mark-orange">稳定</span>的小众云服务器-小鸟云</p> <p>亲测与其他大型的互联网厂商的产品体验没有什么不同，但是个人学习使用和科学上网<span class="mark-orange">便宜</span>才是王道！</p> <p>使用我的推荐码：<span class="mark-pink">ZR2GGE</span> 购买云服务器和主机可以在官网<span class="mark-orange">优惠</span>的基础上<span class="mark-orange">再打85折</span></p> <p>新用户可以点击这个链接直达：<a href="https://www.niaoyun.com/?u=JPHJ68">https://www.niaoyun.com/?u=JPHJ68</a></p></div></div></div> <div class="gitalk-container"><div id="gitalk-container"></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/27/2021, 9:46:39 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/note/language/javascript/3_js.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        第三章：同步和异步
      </a></span> <!----></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.748d377e.js" defer></script><script src="/assets/js/3.0c8a96c6.js" defer></script><script src="/assets/js/214.2cffcb08.js" defer></script><script src="/assets/js/5.27126b58.js" defer></script><script src="/assets/js/8.baed6800.js" defer></script>
  </body>
</html>